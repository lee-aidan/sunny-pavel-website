<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>contact • sunny pavel</title>

    <!-- favicon for browser tabs -->
    <link rel="icon" type="image/png" href="images/flavicon.png" />

    <!-- preload custom font -->
    <link
      rel="preload"
      href="fonts/KirangHaerang-Regular.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />

    <link rel="stylesheet" href="styles.css" />
  </head>

  <body class="contact-body">
    <!-- simple back nav -->
    <a href="index.html" class="back-link accent-font">← back</a>

    <main class="contact-page">
      <header class="contact-header">
        <h1 class="contact-title accent-font">get in touch with me.</h1>
      </header>

      <section class="contact-grid">
        <!-- LEFT SIDE: contact info -->
        <div class="contact-left">
          <div class="contact-row">
            <span class="contact-label">email</span>
            <a
              class="contact-value"
              href="mailto:sunnypavelmusic@gmail.com"
            >
              sunnypavelmusic@gmail.com
            </a>
          </div>

          <div class="contact-row">
            <span class="contact-label">phone</span>
            <a class="contact-value" href="tel:15107341855">
              (510) 734-1855
            </a>

            <!-- socials live under phone -->
            <div class="contact-socials" aria-label="Social links">
              <a
                class="icon icon-instagram"
                href="https://www.instagram.com/sunnypavelmusic?igsh=NTc4MTIwNjQ2YQ%3D%3D&utm_source=qr"
                aria-label="Instagram"
                target="_blank"
                rel="noopener"
              ></a>

              <a
                class="icon icon-tiktok"
                href="http://www.tiktok.com/@sunnypavelmusic"
                aria-label="TikTok"
                target="_blank"
                rel="noopener"
              ></a>

              <a
                class="icon icon-youtube"
                href="https://www.youtube.com/@SunnyPavelMusic"
                aria-label="YouTube"
                target="_blank"
                rel="noopener"
              ></a>

              <a class="icon icon-spotify" href="#" aria-label="Spotify"></a>
              <a class="icon icon-applemusic" href="#" aria-label="Apple Music"></a>
              <a class="icon icon-bandcamp" href="#" aria-label="Bandcamp"></a>
            </div>
          </div>
        </div>

        <!-- RIGHT SIDE: contact form -->
        <div id="contact-right">
          <form
            class="contact-form"
            id="contactForm"
            action="https://formspree.io/f/xpqanlve"
            method="POST"
            autocomplete="on"
          >
            <input
              type="text"
              name="name"
              id="name"
              placeholder="name"
              autocomplete="name"
              required
            />

            <input
              type="tel"
              name="phone"
              id="phone"
              placeholder="phone number"
              autocomplete="tel"
              required
            />

            <input
              type="email"
              name="reply_to"
              id="email"
              placeholder="your email"
              autocomplete="email"
              required
            />

            <textarea
              name="event_details"
              id="eventDetails"
              placeholder="event details"
              rows="5"
              required
            ></textarea>

            <textarea
              name="special_requests"
              id="specialRequests"
              placeholder="special requests (optional)"
              rows="2"
            ></textarea>

            <!-- used by formspree for email subject -->
            <input type="hidden" name="_subject" id="subject" />

            <button type="submit" id="sendBtn">send</button>
          </form>
        </div>
      </section>
    </main>

    <script>
      // basic refs
      const form = document.getElementById("contactForm");
      const rightCol = document.getElementById("contact-right");
      const nameInput = document.getElementById("name");
      const phoneInput = document.getElementById("phone");
      const subjectInput = document.getElementById("subject");
      const sendBtn = document.getElementById("sendBtn");

      // format phone as (xxx) xxx-xxxx
      // also handles +1 / autofill cases
      phoneInput.addEventListener("input", (e) => {
        let digits = e.target.value.replace(/\D/g, "");

        if (digits.length === 11 && digits.startsWith("1")) {
          digits = digits.slice(1);
        }

        digits = digits.slice(0, 10);

        let formatted = "";

        if (digits.length > 0) formatted = "(" + digits.slice(0, 3);
        if (digits.length >= 4) formatted += ") " + digits.slice(3, 6);
        if (digits.length >= 7) formatted += "-" + digits.slice(6);

        e.target.value = formatted;
      });

      // update email subject based on name
      function updateSubject() {
        const name = nameInput.value.trim();
        subjectInput.value = name
          ? `contact form submitted by ${name}`
          : "contact form submitted by (no name)";
      }

      nameInput.addEventListener("input", updateSubject);
      updateSubject();

      // submit via formspree and swap form for thank you
      form.addEventListener("submit", async (e) => {
        e.preventDefault();

        sendBtn.disabled = true;
        sendBtn.style.opacity = "0.6";

        try {
          const res = await fetch(form.action, {
            method: "POST",
            body: new FormData(form),
            headers: { Accept: "application/json" },
          });

          if (!res.ok) throw new Error("submit failed");

          rightCol.innerHTML = `
            <p class="contact-thanks accent-font">
              thanks, i'll do my best to respond promptly!
            </p>
          `;
        } catch (err) {
          sendBtn.disabled = false;
          sendBtn.style.opacity = "0.85";
          alert("Something went wrong. Please try again.");
        }
      });
    </script>
  </body>
</html>